<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Assine documentos PDF online adicionando uma imagem da sua assinatura. Ferramenta segura que funciona diretamente no seu navegador.">
    <title>Assinar PDF com Imagem | PDF TRUE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo"><i class="fas fa-file-pdf"></i> PDF TRUE</a>
                <ul class="nav-links">
                    <li><a href="index.html">Início</a></li>
                </ul>
                <div class="nav-buttons">
                    <a href="index.html" class="btn btn-primary"><i class="fas fa-arrow-left"></i> Voltar</a>
                </div>
            </nav>
        </div>
    </header>

    <div class="tool-page">
        <section class="tool-hero"><div class="container"><div class="tool-hero-content"><h1><i class="fas fa-signature"></i> Assinar PDF</h1><p>Adicione uma imagem da sua assinatura no canto da primeira página.</p></div></div></section>
        <div class="container tool-container-wrapper">
            <div class="tool-main">
                <div class="option-group"><h3><i class="fas fa-file-pdf"></i> 1. Selecione o PDF</h3><input id="assinar-pdf-input" type="file" accept=".pdf"></div>
                <div class="option-group" style="margin-top: 20px;"><h3><i class="fas fa-signature"></i> 2. Selecione a Imagem da Assinatura (PNG)</h3><input id="assinar-signature-input" type="file" accept="image/png"></div>
                <div class="tool-actions" style="margin-top: 30px;"><button id="tool-btn" class="btn btn-primary btn-lg">ASSINAR DOCUMENTO</button></div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container"><div class="footer-content"><div class="footer-column"><h3>PDF TRUE</h3><p>Ferramentas PDF que rodam 100% no seu navegador.</p></div><div class="footer-column"><h3>Legal</h3><ul class="footer-links"><li><a href="#">Termos de Uso</a></li><li><a href="#">Política de Privacidade</a></li></ul></div></div><div class="footer-bottom"><p>&copy; 2025 PDF TRUE. Todos os direitos reservados. <a href="index.html">Voltar ao Início</a></p></div></div>
    </footer>

    <script src="js/pdf-lib-functions.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toolBtn = document.getElementById('tool-btn');
            const pdfInput = document.getElementById('assinar-pdf-input');
            const signatureInput = document.getElementById('assinar-signature-input');

            toolBtn.addEventListener('click', async () => {
                if (pdfInput.files.length === 0) {
                    return showUserMessage('Por favor, selecione o arquivo PDF.', 'error');
                }
                if (signatureInput.files.length === 0) {
                    return showUserMessage('Por favor, selecione a imagem da assinatura.', 'error');
                }
                
                const originalText = toolBtn.textContent;
                toolBtn.textContent = 'Processando...';
                toolBtn.disabled = true;

                try {
                    await handleSign(pdfInput.files[0], signatureInput.files[0]);
                } catch (e) {
                    showUserMessage('Ocorreu um erro: ' + e.message, 'error');
                    console.error(e);
                } finally {
                    toolBtn.textContent = originalText;
                    toolBtn.disabled = false;
                    pdfInput.value = '';
                    signatureInput.value = '';
                }
            });
        });
    </script>
</body>
</html>