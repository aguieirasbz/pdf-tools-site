<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Organize seu PDF removendo páginas. Exclua a última página de um documento PDF com esta ferramenta simples e segura.">
    <title>Organizar PDF - Remover Páginas | PDF TRUE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
</head>
<body>
    <header id="header-placeholder"></header>

    <div class="tool-page">
        <section class="tool-hero"><div class="container"><div class="tool-hero-content"><h1><i class="fas fa-sort"></i> Organizar PDF</h1><p>Exemplo: Deletar a última página de um PDF.</p></div></div></section>
        <div class="container tool-container-wrapper">
            <div class="tool-main">
                <div class="upload-area"><i class="fas fa-cloud-upload-alt"></i><h3>Arraste e solte seu PDF aqui</h3><p>ou</p><a class="btn btn-primary btn-lg">Selecionar arquivo</a><input id="tool-input" type="file" class="file-input" accept=".pdf"><p id="file-info" style="margin-top: 15px; color: var(--gray);"></p></div>
                <div class="tool-actions"><button id="tool-btn" class="btn btn-primary btn-lg">DELETAR ÚLTIMA PÁGINA</button></div>
            </div>
        </div>
    </div>
    
   <footer id="footer-placeholder"></footer>
    <script src="js/main.js"></script>

    <script src="js/pdf-lib-functions.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toolBtn = document.getElementById('tool-btn');
            const fileInput = document.getElementById('tool-input');
            const fileInfo = document.getElementById('file-info');
            const uploadArea = document.querySelector('.upload-area');

            uploadArea.addEventListener('dragover', (e) => { e.preventDefault(); uploadArea.classList.add('active'); });
            uploadArea.addEventListener('dragleave', () => uploadArea.classList.remove('active'));
            uploadArea.addEventListener('drop', () => uploadArea.classList.remove('active'));

            fileInput.addEventListener('change', () => {
                fileInfo.textContent = fileInput.files.length > 0 ? `Arquivo selecionado: ${fileInput.files[0].name}` : '';
            });

            toolBtn.addEventListener('click', async () => {
                if (fileInput.files.length === 0) {
                    return showUserMessage('Por favor, selecione um arquivo PDF.', 'error');
                }
                
                const originalText = toolBtn.textContent;
                toolBtn.textContent = 'Processando...';
                toolBtn.disabled = true;

                try {
                    await handleOrganize_deleteLastPage(fileInput.files[0]);
                } catch (e) {
                    showUserMessage('Ocorreu um erro: ' + e.message, 'error');
                    console.error(e);
                } finally {
                    toolBtn.textContent = originalText;
                    toolBtn.disabled = false;
                    fileInput.value = '';
                    fileInfo.textContent = '';
                }
            });
        });
    </script>
</body>
</html>